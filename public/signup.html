<!DOCTYPE html>
<html>

<head>
<meta charset= "UTF-8">
<title> Sign Up </title>
<link href="https://fonts.googleapis.com/css2?family=Monoton&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href= "style3,2.css" />
</head>

<body>

<header>
	<div class="logo">
			<h3> MCG </h3>
			<h1> (Make Card Game)</h1>
		<div class="signup">
		
			<form action="" id="signup-org" class="signup-org" method="post">
				<table name = "table">
				<td>
				<li><label>Nickname:</label>
					<input id="nick" name="nickname" type="text" placeholder="User Name"/></li>
				<li><label for="email">Email:</label>
					<input id="email" name="email" type="text" placeholder="Email"/></li>
				<li><label for="pass">Password:</label>
					<input id="pass" name="password" type="password" placeholder="Password"/></li>	
				<li><label>Repeat Password:</label>
					<input id="repPass" name="repassword" type="password" placeholder="Password"/></li>
				</td>
				<td class="social-icon">
					<li><label>Login with Social Network: </label></li>
					<table class="social-icon">
						<a href="#" class="fa fa-facebook"></a>
						<a href="#" class="fa fa-twitter"></a>
						<a href="#" class="fa fa-google" id="google"></a>
					</table>
				</td>
				</table>
				<br><br>
				<ul>
				<button class="button" id="b" type="submit"> Create Account</button>
				<p id="p">Already have an account?</p> 
				<button class="btn-01" id="b2" type="button" onclick="location.href='index.html'" >Sign in</button>
			</ul>
			</form>
			
		</div> <!-- signup -->	
	
	</div> <!-- logo -->
</header>
</body>


<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
<!--<script>
    const firebaseConfig = {
  apiKey: "AIzaSyAR61dkpsiGFCQRzCQ4nkAbU0plC-kYslY",
  authDomain: "make-cardgame.firebaseapp.com",
  projectId: "make-cardgame",
  storageBucket: "make-cardgame.appspot.com",
  messagingSenderId: "1016341861949",
  appId: "1:1016341861949:web:c95383455399adf6597c54",
  measurementId: "G-RBP9Q9N1ES"
        };
    firebase.initializeApp(firebaseConfig);
</script>-->
<script type="module">
	import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
	import {getAuth, signInWithPopup, GoogleAuthProvider, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js';

	const firebaseApp = initializeApp({
	  apiKey: "AIzaSyAR61dkpsiGFCQRzCQ4nkAbU0plC-kYslY",
	  authDomain: "make-cardgame.firebaseapp.com",
	  projectId: "make-cardgame",
	  storageBucket: "make-cardgame.appspot.com",
	  messagingSenderId: "1016341861949",
	  appId: "1:1016341861949:web:c95383455399adf6597c54",
	  measurementId: "G-RBP9Q9N1ES"
	});

	const auth = getAuth(firebaseApp);
	const provider = new GoogleAuthProvider(firebaseApp);

	document.getElementById("google").addEventListener("click", function(){
	signInWithPopup(auth, provider)
		.then((result) => {
			const credential = GoogleAuthProvider.credentialFromResult(result);
			const token = credential.accessToken;
			const user = result.user;
			window.location.href= "/home.html";
			// ...
		}).catch((error) => {
			// Handle Errors here.
			const errorCode = error.code;
			const errorMessage = error.message;
			const email = error.email;
			const credential = GoogleAuthProvider.credentialFromError(error);
			// ...
			console.log(errorCode+ errorMessage+ email+ credential)
	});
	})
	const btn= document.getElementById("b");

btn.addEventListener("click", function(){

    const form  = document.getElementById('signup-org');
    const auth =  getAuth();

    form.addEventListener('submit', (event) => {
        event.preventDefault();

        const email = form.elements['email'].value;
        const password = form.elements['pass'].value;
        console.log("email: ", email);
        console.log("password: ", password);
        console.log("name: ", firebase.name);

        return createUserWithEmailAndPassword(auth, email, password)
		.then((result) =>{
		 window.location.href= "/home.html";
		})
		.catch(e => alert(e.message));

       
    });
});
</script>

</html>